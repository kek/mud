{"ts":1340933624587,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"require('../game/all.js')(root);\n\nexports.start = function (io) {\n  var gameWorld = (require('./setup')).setupWorld();\n\n  io.sockets.on('connection', function (socket) {\n    socket.emit('news', { news: 'Connected! Available commands: say, who, look.' });\n\n    var lobby = gameWorld.rooms.findFirstByName(\"The lobby\");\n    var player = new Player(lobby, socket);\n    player.message(\"Welcome, \" + player.name);\n    player.message(player.room.look());\n\n    socket.on('command', function (data) {\n      input = data.command;\n\n      console.log(input);\n\n      words = input.split(\" \");\n      verb = words.shift().toLowerCase();\n      complement = words.join(\" \"); // words.join(\" \");\n\n      var dispatcher = new Dispatcher(player);\n\n      player.message(\"> \" + verb + \" \" + complement);\n\n      if(dispatcher.has(verb)) {\n        dispatcher.act(verb, complement);\n      } else {\n        socket.emit('news', { news: 'Unknown command.' });      \n      }\n\n    });\n  });\n};\n\n"]],"start1":0,"start2":0,"length1":0,"length2":965}]],"length":965}
{"contributors":[],"silentsave":false,"ts":1340933663743,"patch":[[{"diffs":[[0,"{\n      "],[1,"var "],[0,"input = "]],"start1":491,"start2":491,"length1":16,"length2":20},{"diffs":[[0,"ommand;\n"],[-1,""],[0,"\n      c"]],"start1":517,"start2":517,"length1":16,"length2":16},{"diffs":[[0,"\n\n      "],[1,"var "],[0,"words = "]],"start1":551,"start2":551,"length1":16,"length2":20},{"diffs":[[0,";\n      "],[1,"var "],[0,"verb = w"]],"start1":587,"start2":587,"length1":16,"length2":20},{"diffs":[[0,";\n      "],[1,"var "],[0,"compleme"]],"start1":633,"start2":633,"length1":16,"length2":20}]],"length":981,"saved":false}
